schema: '2.0'
stages:
  data_split:
    cmd: python src/data_split.py
    deps:
    - path: data/all_data/
      hash: md5
      md5: a51d400692d79e677923d38ef89bb331.dir
      size: 88985110
      nfiles: 224
    - path: src/data_split.py
      hash: md5
      md5: 92cbc3ea6a0740e559466a998e11ba99
      size: 3506
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 512
          loss_function: dice_loss
          image_channels: 1
          output_classes: 2
        data_split:
          test_split: 0.2
          data_dir: data/all_data/
          train_data_dir: data/train/
          test_data_dir: data/test/
    outs:
    - path: data/test
      hash: md5
      md5: 8ef8bd4b1261404e9b7bbe1f624329fe.dir
      size: 19089349
      nfiles: 48
    - path: data/train
      hash: md5
      md5: d9a75b24e2276c72ef773854cfd7e75c.dir
      size: 69895761
      nfiles: 176
  train:
    cmd: python src/train.py
    deps:
    - path: data/train/
      hash: md5
      md5: d9a75b24e2276c72ef773854cfd7e75c.dir
      size: 69895761
      nfiles: 176
    - path: src/train.py
      hash: md5
      md5: ed3b692d7aec1a93a56f1836ae7a0f76
      size: 9791
    - path: src/unet.py
      hash: md5
      md5: 2ba1fb39428adaf94985a85d02ad7e82
      size: 8314
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 512
          loss_function: dice_loss
          image_channels: 1
          output_classes: 2
        train:
          train_data_dir: data/train/
          model_save_dir: models/
          batch_size: 2
          epochs: 5
          conv_activation_function: relu
          final_activation_function: softmax
          learning_rate: 0.001
          norm_upper_bound: 7
          norm_lower_bound: -1
          validation_split: 0.2
    outs:
    - path: models/dna-damage-model.keras
      hash: md5
      md5: 976d7f0e7ca13ca6d3f2d0831a86c211
      size: 23468340
    - path: results/train/
      hash: md5
      md5: 6ad4c425eea0151b3e345630cbd84314.dir
      size: 598
      nfiles: 5
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/test/
      hash: md5
      md5: 8ef8bd4b1261404e9b7bbe1f624329fe.dir
      size: 19089349
      nfiles: 48
    - path: models/dna-damage-model.keras
      hash: md5
      md5: 976d7f0e7ca13ca6d3f2d0831a86c211
      size: 23468340
    - path: src/evaluate.py
      hash: md5
      md5: f6b1a7ca6029ba656399831892aac57e
      size: 6411
    - path: src/unet.py
      hash: md5
      md5: 2ba1fb39428adaf94985a85d02ad7e82
      size: 8314
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 512
          loss_function: dice_loss
          image_channels: 1
          output_classes: 2
        evaluate:
          model_path: models/dna-damage-model.keras
          test_data_dir: data/test/
    outs:
    - path: results/evaluate/
      hash: md5
      md5: bdc0223e21760955f3780c5813266eff.dir
      size: 1916617
      nfiles: 13
