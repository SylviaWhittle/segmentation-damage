schema: '2.0'
stages:
  data_split:
    cmd: python src/data_split.py
    deps:
    - path: data/all_data/
      hash: md5
      md5: aeb80fd6d5a557e3a747678005b348a9.dir
      size: 88985110
      nfiles: 224
    - path: src/data_split.py
      hash: md5
      md5: 92cbc3ea6a0740e559466a998e11ba99
      size: 3506
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 256
          loss_function: dice_loss
          image_channels: 1
          output_classes: 1
        data_split:
          test_split: 0.2
          data_dir: data/all_data/
          train_data_dir: data/train/
          test_data_dir: data/test/
    outs:
    - path: data/test
      hash: md5
      md5: ba1ad641e789aae4c6a33baf49d9874a.dir
      size: 17491726
      nfiles: 44
    - path: data/train
      hash: md5
      md5: 813d988f50563b76108aee71c6dd029f.dir
      size: 69891067
      nfiles: 176
  train:
    cmd: python src/train.py
    deps:
    - path: data/train/
      hash: md5
      md5: 813d988f50563b76108aee71c6dd029f.dir
      size: 69891067
      nfiles: 176
    - path: src/train.py
      hash: md5
      md5: ca07795dbcf3bce5a76fc35fbd7d17e8
      size: 10665
    - path: src/unet.py
      hash: md5
      md5: 14e4831e31291f6c537064643c1761b1
      size: 8360
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 256
          loss_function: dice_loss
          image_channels: 1
          output_classes: 1
        train:
          train_data_dir: data/train/
          model_save_dir: models/
          batch_size: 9
          epochs: 15
          conv_activation_function: relu
          final_activation_function: sigmoid
          learning_rate: 0.001
          norm_upper_bound: 7
          norm_lower_bound: -1
          validation_split: 0.2
    outs:
    - path: models/dna-damage-model.keras
      hash: md5
      md5: 0e248dd85385542f752fd2da9fb2c74c
      size: 23468053
    - path: results/train/
      hash: md5
      md5: a78ebd45f05896d61926356f61d63d8f.dir
      size: 1545
      nfiles: 5
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/test/
      hash: md5
      md5: ba1ad641e789aae4c6a33baf49d9874a.dir
      size: 17491726
      nfiles: 44
    - path: models/dna-damage-model.keras
      hash: md5
      md5: 0e248dd85385542f752fd2da9fb2c74c
      size: 23468053
    - path: src/evaluate.py
      hash: md5
      md5: 0d0188ed266945ef746d5d2eb43f7e5d
      size: 7123
    - path: src/unet.py
      hash: md5
      md5: 14e4831e31291f6c537064643c1761b1
      size: 8360
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 256
          loss_function: dice_loss
          image_channels: 1
          output_classes: 1
        evaluate:
          model_path: models/dna-damage-model.keras
          test_data_dir: data/test/
    outs:
    - path: results/evaluate/
      hash: md5
      md5: a63e43c2530b2f930d740531bc9f7633.dir
      size: 1841224
      nfiles: 12
